<%-include('../layouts/head')%> <%-include('../layouts/navbar')%>
<div class="w-full pt-[10px]">
  <div class="w-full pt-0 pb-0">
    <div class="w-full">
      <div class="max-w-6xl mx-auto">
        <div class="w-full my-10">
          <div>
            <div
              class="flex items-center font-[400] text-[13px] text-black mb-[23px]"
            >
              <a href="/" class="capitalize">
                <img
                  src="https://i.imgur.com/FFjafxI.png"
                  alt=""
                  width="17"
                  height="17"
                  class="mx-1 mb-2"
              /></a>
              <span class="sperator">/</span>
              <span>
                <a href="/profile">
                  <span class="mx-1 capitalize">Hồ sơ</span>
                </a>
              </span>
            </div>
          </div>
          <div class="w-full bg-white px-10 py-3 lg:py-9 border">
            <div class="w-full flex justify-between items-center">
              <h1 class="text-[22px] font-bold text-black">
                Tổng quan của bạn
              </h1>
            </div>
            <div class="w-full mt-8 flex flex-col lg:flex-row lg:space-x-10">
              <%-include('./menu')%>
              <div class="w-full">
                <div class="w-[100%]">
                  <h4 class="text-2xl pb-5">Sổ địa chỉ</h4>
                  <button id="addAddress"
                    class="modal-btn inline-flex justify-center text-center w-full p-4 bg-white text-blue-500 mb-4 rounded-lg border border-dashed border-gray-300"
                    style="padding-left: 0px; padding-right: 8px"
                  >
                    <span
                      size="26"
                      class="inline-block w-26 h-26 bg-center bg-no-repeat"
                    ></span>
                    <div class="spacer"></div>
                    Thêm địa chỉ mới
                  </button>
                </div>        
                <div class="text-sm font-semibold mt-3 text-blue">
                  Địa chỉ chính
                </div>
               <% all.forEach(function(data) { %>
                  <% if(data.default == "true"){%>
                <div class="flex flex-row justify-between mt-2">
                  <div class="lg:w-80 flex flex-col text-sm">
                    <div class="mt-1"><%-data.fullname%>></div>
                    <div class="mt-1"><%-data.phone%>></div>
                    <div class="mt-1">
                      <%-data.address%>>
                    </div>
                  </div>
                  <div class="flex flex-row items-center">
                    <button type="button" id="editAddress_<%-data._id%>" class="border-none bg-none mr-4 modal-btn">
                      <svg
                        class="text-blue-500"
                        height="20"
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 576 512"
                      >
                        <path
                          fill="currentColor"
                          d="M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"
                        ></path>
                      </svg>
                    </button>
                    <form method="GET" class="flex items-center" action="/api/user/<%-data._id%>/delete-address" data-ajax>
                      <button type="submit" class="border-none bg-none">
                        <svg
                          class="text-red-500"
                          height="20"
                          xmlns="http://www.w3.org/2000/svg"
                          viewBox="0 0 448 512"
                        >
                          <path
                            fill="currentColor"
                            d="M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"
                          ></path>
                        </svg></form>
                  </div>
                </div> 
                <%}%>
                <% })%>
                <div class="text-sm border-t border-gray pt-3 font-semibold mt-3 text-blue">
                    Địa chỉ phụ
                 </div>
                 <% let i =0; all.forEach(function(data) { %>
                  <% if(data.default == "false"){%>      
                    <% if(i++ > 0){%><hr class="mt-3"/><%}%>
                <div class="flex flex-row justify-between mt-2">
                  <div class="lg:w-80 flex flex-col text-sm">
                    <div class="mt-1"><%-data.fullname%>></div>
                    <div class="mt-1"><%-data.phone%>></div>
                    <div class="mt-1">
                      <%-data.address%>
                    </div>
                  </div>
                  <div class="flex flex-row items-center">
                    <button type="button" id="editAddress_<%-data._id%>" class="border-none bg-none mr-4 modal-btn">
                      <svg
                        class="text-blue-500"
                        height="20"
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 576 512"
                      >
                        <path
                          fill="currentColor"
                          d="M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"
                        ></path>
                      </svg>
                    </button>
                    <form method="GET" class="flex items-center" action="/api/user/<%-data._id%>/delete-address" data-ajax>
                      <button type="submit" class="border-none bg-none">
                        <svg
                          class="text-red-500"
                          height="20"
                          xmlns="http://www.w3.org/2000/svg"
                          viewBox="0 0 448 512"
                        >
                          <path
                            fill="currentColor"
                            d="M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"
                          ></path>
                        </svg></form>
                    </form>
                  </div>
                </div>  
          
                <%}%>
                <% })%>

                 
            
                 
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="relative z-50 modal" modal-id="#addAddress" aria-labelledby="modal-title" role="dialog" aria-modal="true" style="display:none">
    <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"></div>
  
    <div class="fixed inset-0 z-10 w-screen overflow-y-auto">
      <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">
        <form action="/api/user/add-address" method="POST" class="relative modal-home transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg" data-ajax>
          <div class="bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4">
            <div class="sm:flex sm:items-start">
         
              <div class="mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left">
                <h3 class="text-base font-semibold leading-6 text-gray-900" id="modal-title">Thêm địa chỉ</h3>
                <div class="mt-2 mb-2">
                  <p class="text-sm text-gray-500">Thêm địa chỉ để giúp thuận tiện hơn khi mua hàng online trên trang web của chúng</p>
                </div>
                 <div class="mb-2">
                    <div class="w-full h-full">
                      <label
                        class="block mb-2 text-gray text-[13px] font-normal"
                        for="fullname"
                        >Họ và tên *</label
                      >
                      <div
                        class="border border-gray w-full h-full overflow-hidden relative rounded-md"
                      >
                        <input
                          placeholder="Nguyen Van A"
                          class=" placeholder:text-sm text-sm px-3 text-dark-gray w-full font-normal bg-white focus:ring-0 focus:outline-none h-[40px]"
                          type="text"
                          name="fullname"
                          id="fullname"
                          value="Vương Thanh Tùng"
                        />
                      </div>
                    </div>
                  </div>
                  <div class="mb-2">
                    <div class="w-full h-full">
                      <label
                        class="block mb-2 text-gray text-[13px] font-normal"
                        for="phone"
                        >Số điện thoại *</label
                      >
                      <div
                        class="border border-gray w-full h-full overflow-hidden relative rounded-md"
                      >
                        <input
                          placeholder="0123456789"
                          class=" placeholder:text-sm text-sm px-3 text-dark-gray w-full font-normal bg-white focus:ring-0 focus:outline-none h-[40px]"
                          type="number"
                          name="phone"
                          id="phone"
                          value="0986379490"
                        />
                      </div>
                    </div>
                  </div>
                  <div class="mb-2">
                    <div class="w-full h-full">
                      <label
                        class="block mb-2 text-gray text-[13px] font-normal"
                        for="address"
                        >Địa chỉ *</label
                      >
                      <div
                        class="border border-gray w-full h-full overflow-hidden relative rounded-md"
                        id="address" name="address"
                      >
                      <textarea placeholder="Nhập địa chỉ..."
                      id="address" name="address" rows="4" cols="50" class=" placeholder:text-sm text-sm p-3 text-dark-gray w-full font-normal bg-white focus:ring-0 focus:outline-none"
                      ></textarea>
                      </div>
                    </div>
                  </div>
                  <div class="flex  mt-2 flex-wrap justify-end opacity-1">
                    <div class="flex flex-wrap flex-col opacity-1 mb-[16px]">
                        <div class="flex items-center flex-col justify-center relative max-w-full min-h-[1px] opacity-1">
                            <div class="max-w-full" style="flex: 1 1 auto;">
                                <input id="default-checkbox" type="checkbox" name="type" value="1" class="w-3 h-3 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600  ">
                                <label for="default-checkbox" class="ms-1 text-[15px] font-medium text-blue-900 ">Đặt mặc định</label>
                            </div>
                        </div>
                    </div>
                </div>
              </div>
            </div>
          </div>
          <div class="bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6">
            <button type="submit" class="inline-flex w-full justify-center rounded-md bg-[#1435c3] px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-[#001675] sm:ml-3 sm:w-auto">Thêm địa chỉ</button>
            <button type="button" class="mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto close-modal" modal-id="#addAddress">Hủy bỏ</button>
          </div>
        </form>
      </div>
    </div>
</div>


<% all.forEach(function(data) { %>
<div class="relative z-50 modal" modal-id="#editAddress_<%-data._id%>" aria-labelledby="modal-title" role="dialog" aria-modal="true" style="display:none">
  <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"></div>

  <div class="fixed inset-0 z-10 w-screen overflow-y-auto">
    <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">
      <form action="/api/user/<%-data._id%>/edit-address" method="POST" class="relative modal-home transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg" data-ajax>
        <div class="bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4">
          <div class="sm:flex sm:items-start">
       
            <div class="mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left">
              <h3 class="text-base font-semibold leading-6 text-gray-900" id="modal-title">Chỉnh sửa địa chỉ</h3>
              <div class="mt-2 mb-2">
                <p class="text-sm text-gray-500">Thêm địa chỉ để giúp thuận tiện hơn khi mua hàng online trên trang web của chúng</p>
              </div>
               <div class="mb-2">
                  <div class="w-full h-full">
                    <label
                      class="block mb-2 text-gray text-[13px] font-normal"
                      for="fullname"
                      >Họ và tên *</label
                    >
                    <div
                      class="border border-gray w-full h-full overflow-hidden relative rounded-md"
                    >
                      <input
                        placeholder="Nguyen Van A"
                        class=" placeholder:text-sm text-sm px-3 text-dark-gray w-full font-normal bg-white focus:ring-0 focus:outline-none h-[40px]"
                        type="text"
                        name="fullname"
                        id="fullname"
                        value="<%-data.fullname%>"
                      />
                    </div>
                  </div>
                </div>
                <div class="mb-2">
                  <div class="w-full h-full">
                    <label
                      class="block mb-2 text-gray text-[13px] font-normal"
                      for="phone"
                      >Số điện thoại *</label
                    >
                    <div
                      class="border border-gray w-full h-full overflow-hidden relative rounded-md"
                    >
                      <input
                        placeholder="0123456789"
                        class=" placeholder:text-sm text-sm px-3 text-dark-gray w-full font-normal bg-white focus:ring-0 focus:outline-none h-[40px]"
                        type="number"
                        name="phone"
                        id="phone"
                        value="<%-data.phone%>"
                      />
                    </div>
                  </div>
                </div>
                <div class="mb-2">
                  <div class="w-full h-full">
                    <label
                      class="block mb-2 text-gray text-[13px] font-normal"
                      for="address"
                      >Địa chỉ *</label
                    >
                    <div
                      class="border border-gray w-full h-full overflow-hidden relative rounded-md"
                      id="address" name="address"
                    >
                    <textarea placeholder="Nhập địa chỉ..."
                    id="address" name="address" rows="4" cols="50" class=" placeholder:text-sm text-sm p-3 text-dark-gray w-full font-normal bg-white focus:ring-0 focus:outline-none"
                    ><%-data.address%></textarea>
                    </div>
                  </div>
                </div>
                <div class="flex  mt-2 flex-wrap justify-end opacity-1">
                  <div class="flex flex-wrap flex-col opacity-1 mb-[16px]">
                      <div class="flex items-center flex-col justify-center relative max-w-full min-h-[1px] opacity-1">
                          <div class="max-w-full" style="flex: 1 1 auto;">
                              <input id="default-checkbox_<%-data._id%>" type="checkbox" name="type" value="1" class="w-3 h-3 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600  " <% if(data.default == "true"){%>checked<%} %>>
                              <label for="default-checkbox_<%-data._id%>" class="ms-1 text-[15px] font-medium text-blue-900  ">Đặt mặc định</label>
                          </div>
                      </div>
                  </div>
              </div>
            </div>
          </div>
        </div>
        <div class="bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6">
          <button type="submit" class="inline-flex w-full justify-center rounded-md bg-[#1435c3] px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-[#001675] sm:ml-3 sm:w-auto">Cập nhập</button>
          <button type="button" class="mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto close-modal" modal-id="#addAddress">Hủy bỏ</button>
        </div>
      </form>
    </div>
  </div>
</div>
<%})%>
<%-include('../layouts/footer')%> <%-include('../layouts/script') %>
<%-include('../layouts/end')%>
